# Overview

This section explains how the **EnergyScope** library is mathematically structured, how it models energy systems, and the key architectural choices that make it scalable and efficient. The formulation relies on an optimization framework, allowing the model to identify optimal strategies for energy system design and operation based on user-defined objectives.

---

## [Modeling Framework](./mathematical_framework.md)

!!! abstract "Modeling Framework Summary"
    **EnergyScope** uses a **Linear Programming (LP)** formulation to model energy systems. The optimization process involves decision variables and constraints that define energy flows, technology capacities, and resource allocations. The model’s objective function can be customized to minimize costs, emissions, or maximize renewable energy integration, for instance.

The mathematical foundation of **EnergyScope** revolves around the **Linear Programming (LP)** approach. The model integrates various decision variables, such as technology capacities and energy flows, and optimizes these variables under a set of system constraints.

### Linear Programming Formulation

The **LP formulation** in **EnergyScope** is expressed as:

$$
\text{min} \quad f^{obj}(F,F_t) \quad \quad \text{s.t.:}
$$

$$
\begin{aligned}
\text{Mass and Energy Balances} \\
\text{Resource Constraints} \\
\text{Technology Constraints} \\
\text{Demand Constraints} \\
\text{Policy Constraints}
\end{aligned}
$$

where:

-  $f^{obj}(x)$ is the objective function (e.g., minimizing total system costs or carbon emissions),  
-  $F,F_t$ represents the decision variables (e.g., technology capacities $F$ and period-specific use $F_t$),  

The constraints ensure that energy supply meets demand, available resources are not exceeded, and all technologies operate within their physical and operational limits.

### Decision Variables and Constraints

**EnergyScope** uses a variety of decision variables and constraints to model the energy system:

- **Capacities** ($F$): This variable determines the size of assets (e.g., power plants, storage facilities, grid infrastructures).
  
- **Operation** ($F_{t}$): This represents the utilization of the technologies, infrastructure, resources and flows: energy transferred between different parts of the system, such as the amount of electricity generated by renewable sources, heat provided by heat pumps, or fuel consumed by transportation systems.  
  
- **Storage Levels** ($Sto^{level}_t$): Energy storage is essential for handling temporal imbalances between supply and demand. Storage variables define how much energy is stored and when it is dispatched to meet demand.  

The constraints are essential to ensure the representativeness and the feasibility of the system design:

- **Energy Balance Constraints**: These constraints ensure that the energy supplied by different carriers equals the energy consumed by demand sectors. The energy balance equation is as follows:

$$
\sum_{i} \text{Supply}(i) = \sum_{j} \text{Demand}(j)
$$

- **Resource Constraints**: This limits the use of various energy resources, such as renewables, fossil fuels, and imports, based on availability and sustainability targets.

- **Technological Constraints**: These constraints define the operational limits of energy conversion and storage technologies, ensuring they operate within their capacity and efficiency limits.

---

## Implementation Steps

!!! abstract "Implementation Steps Summary"
    The implementation of **EnergyScope** is divided into two steps: 1) setting up the system by defining the energy demands, resources, and technologies; 2) optimizing the design and operation of the energy system according to the defined objective function. This approach ensures that the system is both efficient and flexible, accommodating different energy scenarios.

### Step 1: Defining the Energy System

![Balance Principle: Energy & Mass Balance between resources (and imports), energy service demands, and the technologies](../images/framework/balance.png)
  > **Figure**: The energy and mass balance in **EnergyScope**, which ensures that energy input (from resources and imports) matches the output (to meet energy service demands), while factoring in losses from inefficiencies in conversion technologies.

The first implementation step in **EnergyScope** involves setting up the energy system. This requires defining:

- **End-use energy demands**: The total energy demand across sectors, including residential heating, industrial energy consumption, electricity demand, and transportation energy.  
- **Energy resources**: The availability of renewable and non-renewable resources, such as solar, wind, nuclear, natural gas, and imports.  
- **Conversion technologies**: The various technologies available for energy conversion, such as wind turbines, solar panels, gas turbines, heat pumps, and hydrogen electrolysis.

  ![Technology Principle: Black box approach for conversion units and parameters](../images/framework/tech_principle.png)
  > **Figure**: The black-box approach in **EnergyScope** showing how different technologies convert inputs into useful outputs while tracking efficiency, costs, and environmental impacts.

Once these inputs are defined, **EnergyScope** is configured to reflect the current or future energy system configuration. Users can define the year being modeled, such as 2050, and adjust assumptions about demand growth, technology costs, and resource availability.

### Step 2: Optimizing the Energy System

In the second step, **EnergyScope** optimizes the energy system using the previously defined LP formulation. The optimization process identifies the best combination of technologies and energy flows that meet the system’s energy demands while minimizing or maximizing a given objective (e.g., cost, emissions). 

The optimization outputs include:

- **Technology sizing**: Optimal capacities for power generation and storage technologies.  
- **Energy dispatch**: How energy is generated, consumed, and stored throughout the day or year.  
- **Emissions and costs**: Total greenhouse gas emissions and overall system costs.  

  ![Optimization Framework](../images/framework/principle.png)
  > **Figure**: The optimization principle in **EnergyScope**, showing how energy inputs, technologies, and energy demands are balanced to minimize costs and/or emissions.

This process can be repeated for different scenarios, allowing users to explore various futures, such as increased renewable penetration, carbon pricing policies, or energy storage expansions.

---

## Design Rationale and Architectural Choices

!!! abstract "Design Rationale and Architectural Choices Summary"
    **EnergyScope** employs a modular and scalable architecture that balances the need for detailed system representation with computational efficiency. The design decisions focus on maintainability, adaptability, and the ability to accommodate different levels of complexity depending on the user's requirements.

### Modular Design for Scalability and Maintainability

The architecture of **EnergyScope** is built around modular components that allow for flexibility and scalability. This modular design offers the following benefits:

- **Scalability**: New technologies, sectors, or regions can be added to the model without disrupting the overall structure. This makes it easy to expand the system to cover new geographical areas or emerging technologies, such as hydrogen production or carbon capture and storage (CCS).  
- **Maintainability**: Each module (e.g., energy carriers, conversion technologies, storage) can be updated independently, ensuring that updates or improvements in one part of the model do not affect other components. This reduces the complexity of maintaining the model over time.  

### Trade-offs Between Detail and Usability

Energy system modeling can be compared to a map, where the level of detail is adjusted based on the desired scope. When zooming in, the model reveals finer, localized details such as specific energy flows, resource constraints, or operational characteristics. Conversely, when zooming out to capture a broader, system-wide perspective, smaller, less significant details are often abstracted or neglected to maintain clarity. The complexity of an energy system model should be tailored to its purpose—sufficiently detailed to capture critical dynamics, yet simplified enough to avoid unnecessary complexity that could obscure the overall insights.

The design of **EnergyScope** strikes a balance between detailed system modeling and ease of use:

- **Detail**: The model includes detailed representations of energy carriers, conversion technologies, storage solutions, and sectoral interactions. Users can simulate intricate interactions between electricity generation, heating systems, transportation, and industrial energy consumption.  
- **Usability**: Despite its complexity, **EnergyScope** is designed to be user-friendly. The modularity of the system allows users to adjust the level of detail depending on their specific needs, making it suitable for both high-level scenario analysis and detailed national energy planning.  

This balance ensures that **EnergyScope** can be used across a wide range of applications, from research and academic studies to policy analysis and strategic energy planning.